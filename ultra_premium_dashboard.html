<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultra Premium AI Dashboard - Quantum Elite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .ai-glow {
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }
        .metric-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="gradient-bg min-h-screen text-white">
    <!-- Navigation -->
    <nav class="bg-black/20 backdrop-blur-md border-b border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center mr-3">
                            <i data-lucide="brain" class="w-5 h-5 text-white"></i>
                        </div>
                        <h1 class="text-xl font-bold">Ultra Premium AI</h1>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm opacity-75">Welcome, Ultra Premium Member</span>
                    <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                        <i data-lucide="user" class="w-4 h-4 text-white"></i>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Header -->
        <div class="mb-8">
            <h2 class="text-3xl font-bold mb-2">AI Trading Intelligence Dashboard</h2>
            <p class="text-white/70">Real-time market analysis powered by advanced neural networks</p>
        </div>

        <!-- Key Metrics -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="metric-card rounded-lg p-6 ai-glow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-white/70 text-sm">AI Win Rate</p>
                        <p class="text-2xl font-bold text-green-400">96.8%</p>
                    </div>
                    <div class="w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center">
                        <i data-lucide="trending-up" class="w-6 h-6 text-green-400"></i>
                    </div>
                </div>
            </div>

            <div class="metric-card rounded-lg p-6 ai-glow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-white/70 text-sm">Active Signals</p>
                        <p class="text-2xl font-bold text-blue-400">24</p>
                    </div>
                    <div class="w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center">
                        <i data-lucide="activity" class="w-6 h-6 text-blue-400"></i>
                    </div>
                </div>
            </div>

            <div class="metric-card rounded-lg p-6 ai-glow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-white/70 text-sm">Market Regime</p>
                        <p class="text-2xl font-bold text-purple-400">Bull</p>
                    </div>
                    <div class="w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center">
                        <i data-lucide="target" class="w-6 h-6 text-purple-400"></i>
                    </div>
                </div>
            </div>

            <div class="metric-card rounded-lg p-6 ai-glow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-white/70 text-sm">AI Confidence</p>
                        <p class="text-2xl font-bold text-yellow-400">94%</p>
                    </div>
                    <div class="w-12 h-12 bg-yellow-500/20 rounded-lg flex items-center justify-center">
                        <i data-lucide="brain" class="w-6 h-6 text-yellow-400"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Live Signals -->
            <div class="lg:col-span-2">
                <div class="metric-card rounded-lg p-6">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i data-lucide="zap" class="w-5 h-5 mr-2 text-yellow-400"></i>
                        Live AI Signals
                    </h3>
                    <div class="space-y-4" id="signals-container">
                        <!-- Signals will be loaded dynamically -->
                        <div class="text-center py-8">
                            <div class="inline-flex items-center">
                                <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-400 mr-2"></div>
                                <span class="text-white/70">Loading live signals...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Insights & Analytics -->
            <div class="space-y-6">
                <!-- Market Regime -->
                <div class="metric-card rounded-lg p-6">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i data-lucide="radar" class="w-5 h-5 mr-2 text-purple-400"></i>
                        Market Regime
                    </h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Current Regime</span>
                            <span class="bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs">Bull Market</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Confidence</span>
                            <span class="text-white">87%</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Duration</span>
                            <span class="text-white">12 days</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Next Change Prob.</span>
                            <span class="text-yellow-400">23%</span>
                        </div>
                    </div>
                </div>

                <!-- Performance Metrics -->
                <div class="metric-card rounded-lg p-6">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i data-lucide="bar-chart-3" class="w-5 h-5 mr-2 text-blue-400"></i>
                        AI Performance
                    </h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Win Rate (30D)</span>
                            <span class="text-green-400">96.8%</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Avg. Return</span>
                            <span class="text-green-400">+2.4%</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Sharpe Ratio</span>
                            <span class="text-blue-400">2.8</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Max Drawdown</span>
                            <span class="text-red-400">-3.2%</span>
                        </div>
                    </div>
                </div>

                <!-- AI Model Status -->
                <div class="metric-card rounded-lg p-6">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i data-lucide="cpu" class="w-5 h-5 mr-2 text-green-400"></i>
                        AI Models
                    </h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Neural Predictor</span>
                            <span class="bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs">Active</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Adaptive Strategy</span>
                            <span class="bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs">Active</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Custom Model</span>
                            <span class="bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs">Training</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Regime Detector</span>
                            <span class="bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs">Active</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="mt-12 text-center">
            <p class="text-white/50 text-sm">
                Ultra Premium AI Trading Platform | Powered by Quantum Elite Technology |
                <a href="#" class="text-blue-400 hover:text-blue-300">Privacy Policy</a> |
                <a href="#" class="text-blue-400 hover:text-blue-300">Terms of Service</a>
            </p>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Global data storage
        let dashboardData = {
            signals: [],
            metrics: {},
            marketRegime: {},
            aiModels: [],
            performance: {}
        };

        // API base URL - change this if your server runs on a different port
        const API_BASE = window.location.origin.includes('localhost') ? 'http://localhost:5000' : window.location.origin;

        // Format time ago
        function formatTimeAgo(timestamp) {
            const now = new Date();
            const signalTime = new Date(timestamp);
            const diffMinutes = Math.floor((now - signalTime) / (1000 * 60));

            if (diffMinutes < 1) return 'Just now';
            if (diffMinutes < 60) return `${diffMinutes} minutes ago`;

            const diffHours = Math.floor(diffMinutes / 60);
            if (diffHours < 24) return `${diffHours} hours ago`;

            const diffDays = Math.floor(diffHours / 24);
            return `${diffDays} days ago`;
        }

        // Format price based on asset type
        function formatPrice(price, asset) {
            if (typeof price !== 'number') return price;

            if (asset.includes('JPY')) {
                return price.toFixed(3);
            } else if (asset.includes('BTC') || asset.includes('GOLD')) {
                return price.toLocaleString('en-US', {
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 0
                });
            } else {
                return price.toFixed(5);
            }
        }

        // Get signal border color based on type
        function getSignalBorderColor(type) {
            switch (type.toLowerCase()) {
                case 'buy': return 'border-green-500/30';
                case 'sell': return 'border-red-500/30';
                case 'hold': return 'border-blue-500/30';
                default: return 'border-gray-500/30';
            }
        }

        // Get signal text color based on type
        function getSignalTextColor(type) {
            switch (type.toLowerCase()) {
                case 'buy': return 'text-green-400';
                case 'sell': return 'text-red-400';
                case 'hold': return 'text-blue-400';
                default: return 'text-gray-400';
            }
        }

        // Get action buttons based on signal type
        function getActionButtons(type) {
            if (type.toLowerCase() === 'hold') {
                return `
                    <button class="bg-gray-500/20 hover:bg-gray-500/30 px-3 py-1 rounded text-xs">Monitor</button>
                    <button class="bg-gray-500/20 hover:bg-gray-500/30 px-3 py-1 rounded text-xs">Details</button>
                `;
            } else {
                return `
                    <button class="bg-blue-500/20 hover:bg-blue-500/30 px-3 py-1 rounded text-xs">Execute</button>
                    <button class="bg-gray-500/20 hover:bg-gray-500/30 px-3 py-1 rounded text-xs">Details</button>
                `;
            }
        }

        // Render signals
        function renderSignals(signals) {
            const container = document.getElementById('signals-container');
            if (!signals || signals.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8">
                        <span class="text-white/50">No active signals at this time</span>
                    </div>
                `;
                return;
            }

            const signalsHtml = signals.map(signal => {
                const borderColor = getSignalBorderColor(signal.type);
                const textColor = getSignalTextColor(signal.type);
                const actionButtons = getActionButtons(signal.type);
                const entryPrice = formatPrice(signal.entry, signal.asset);
                const targetPrice = formatPrice(signal.target, signal.asset);

                return `
                    <div class="bg-white/5 rounded-lg p-4 border ${borderColor}">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <span class="${textColor} font-semibold">${signal.type} ${signal.asset}</span>
                                <span class="text-sm text-white/60 ml-2">${entryPrice} â†’ ${targetPrice}</span>
                            </div>
                            <span class="bg-${signal.type === 'BUY' ? 'green' : signal.type === 'SELL' ? 'red' : 'blue'}-500/20 ${textColor} px-2 py-1 rounded text-xs">${signal.confidence}% AI Confidence</span>
                        </div>
                        <p class="text-sm text-white/70">${signal.ai_analysis}</p>
                        <div class="flex justify-between items-center mt-3">
                            <span class="text-xs text-white/50">${signal.time_ago}</span>
                            <div class="flex space-x-2">
                                ${actionButtons}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = signalsHtml;
        }

        // Update metrics
        function updateMetrics(metrics) {
            if (!metrics) return;

            // Update key metrics cards
            const winRateEl = document.querySelector('.metric-card:nth-child(1) .text-2xl');
            const activeSignalsEl = document.querySelector('.metric-card:nth-child(2) .text-2xl');
            const marketRegimeEl = document.querySelector('.metric-card:nth-child(3) .text-2xl');
            const aiConfidenceEl = document.querySelector('.metric-card:nth-child(4) .text-2xl');

            if (winRateEl) winRateEl.textContent = `${metrics.win_rate.toFixed(1)}%`;
            if (activeSignalsEl) activeSignalsEl.textContent = metrics.active_signals;
            if (marketRegimeEl) marketRegimeEl.textContent = metrics.market_regime;
            if (aiConfidenceEl) aiConfidenceEl.textContent = `${metrics.ai_confidence}%`;
        }

        // Update market regime
        function updateMarketRegime(regimeData) {
            if (!regimeData) return;

            const currentRegimeEl = document.querySelector('.metric-card .bg-green-500\\/20, .metric-card .bg-red-500\\/20, .metric-card .bg-yellow-500\\/20');
            const confidenceEl = document.querySelector('.metric-card .text-white');
            const durationEl = document.querySelector('.metric-card .text-white');
            const probabilityEl = document.querySelector('.metric-card .text-yellow-400');

            // Find the correct elements by checking their content
            const regimeElements = document.querySelectorAll('.metric-card .flex.justify-between.items-center');
            if (regimeElements.length >= 4) {
                const currentRegimeSpan = regimeElements[1].querySelector('span:last-child');
                const confidenceSpan = regimeElements[2].querySelector('span:last-child');
                const durationSpan = regimeElements[3].querySelector('span:last-child');
                const probabilitySpan = regimeElements[4].querySelector('span:last-child');

                if (currentRegimeSpan) currentRegimeSpan.textContent = regimeData.current_regime;
                if (confidenceSpan) confidenceSpan.textContent = `${regimeData.confidence}%`;
                if (durationSpan) durationSpan.textContent = `${regimeData.duration_days} days`;
                if (probabilitySpan) probabilitySpan.textContent = `${regimeData.next_change_probability}%`;
            }
        }

        // Update AI models
        function updateAIModels(models) {
            if (!models || !models.models) return;

            const modelElements = document.querySelectorAll('.metric-card .flex.justify-between.items-center');
            if (modelElements.length >= 4) {
                for (let i = 0; i < Math.min(models.models.length, 4); i++) {
                    const model = models.models[i];
                    const statusSpan = modelElements[i + 1].querySelector('span:last-child');
                    if (statusSpan) {
                        statusSpan.textContent = model.status;
                        statusSpan.className = `px-2 py-1 rounded text-xs ${
                            model.status === 'active' ? 'bg-green-500/20 text-green-400' :
                            model.status === 'training' ? 'bg-blue-500/20 text-blue-400' :
                            'bg-yellow-500/20 text-yellow-400'
                        }`;
                    }
                }
            }
        }

        // Update performance metrics
        function updatePerformance(performance) {
            if (!performance) return;

            const performanceElements = document.querySelectorAll('.metric-card .flex.justify-between.items-center');
            if (performanceElements.length >= 5) {
                const winRateSpan = performanceElements[1].querySelector('span:last-child');
                const avgReturnSpan = performanceElements[2].querySelector('span:last-child');
                const sharpeSpan = performanceElements[3].querySelector('span:last-child');
                const maxDrawdownSpan = performanceElements[4].querySelector('span:last-child');

                if (winRateSpan) winRateSpan.textContent = `${performance.win_rate_30d}%`;
                if (avgReturnSpan) avgReturnSpan.textContent = `+${performance.average_return}%`;
                if (sharpeSpan) sharpeSpan.textContent = performance.sharpe_ratio;
                if (maxDrawdownSpan) maxDrawdownSpan.textContent = `${performance.max_drawdown}%`;
            }
        }

        // Fetch data from API
        async function fetchSignals() {
            try {
                const response = await fetch(`${API_BASE}/api/signals`);
                if (response.ok) {
                    const data = await response.json();
                    dashboardData.signals = data.signals;
                    renderSignals(data.signals);
                }
            } catch (error) {
                console.error('Failed to fetch signals:', error);
            }
        }

        async function fetchMetrics() {
            try {
                const response = await fetch(`${API_BASE}/api/metrics`);
                if (response.ok) {
                    const data = await response.json();
                    dashboardData.metrics = data;
                    updateMetrics(data);
                }
            } catch (error) {
                console.error('Failed to fetch metrics:', error);
            }
        }

        async function fetchMarketRegime() {
            try {
                const response = await fetch(`${API_BASE}/api/market-regime`);
                if (response.ok) {
                    const data = await response.json();
                    dashboardData.marketRegime = data;
                    updateMarketRegime(data);
                }
            } catch (error) {
                console.error('Failed to fetch market regime:', error);
            }
        }

        async function fetchAIModels() {
            try {
                const response = await fetch(`${API_BASE}/api/ai-models`);
                if (response.ok) {
                    const data = await response.json();
                    dashboardData.aiModels = data.models;
                    updateAIModels(data);
                }
            } catch (error) {
                console.error('Failed to fetch AI models:', error);
            }
        }

        async function fetchPerformance() {
            try {
                const response = await fetch(`${API_BASE}/api/performance`);
                if (response.ok) {
                    const data = await response.json();
                    dashboardData.performance = data;
                    updatePerformance(data);
                }
            } catch (error) {
                console.error('Failed to fetch performance:', error);
            }
        }

        // Initialize dashboard
        async function initializeDashboard() {
            console.log('Initializing Ultra Premium Dashboard...');

            // Fetch all data
            await Promise.all([
                fetchSignals(),
                fetchMetrics(),
                fetchMarketRegime(),
                fetchAIModels(),
                fetchPerformance()
            ]);

            console.log('Dashboard initialized with live data');
        }

        // Auto-refresh functionality
        function startAutoRefresh() {
            // Update signals every 30 seconds
            setInterval(fetchSignals, 30000);

            // Update metrics every 60 seconds
            setInterval(fetchMetrics, 60000);

            // Update market regime every 5 minutes
            setInterval(fetchMarketRegime, 300000);

            // Update AI models every 2 minutes
            setInterval(fetchAIModels, 120000);

            // Update performance every 5 minutes
            setInterval(fetchPerformance, 300000);
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', () => {
            initializeDashboard();
            startAutoRefresh();
        });
    </script>
</body>
</html>
